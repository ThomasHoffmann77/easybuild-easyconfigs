# Thomas Hoffmann, EMBL Heidelberg, structures-it@embl.de, 2024/06
# conda reference module.
easyblock = 'Conda'

name = 'warp'
version = '2.0.0dev14'
versionsuffix = '-conda'

homepage = 'https://github.com/warpem/warp'
description = """Warp is a set of tools for cryo-EM and cryo-ET data processing including, among 
other tools: Warp, M, WarpTools, MTools, MCore, and Noise2Map."""

toolchain = SYSTEM

channels = ['warpem', 'nvidia/label/cuda-11.7.0', 'pytorch', 'conda-forge']
dependencies = [
    ('Miniconda3', '22.11.1-1', '', SYSTEM)
]
requirements = "%(name)s=%(version)s"

sanity_check_paths = {
    'files': [],
    'dirs': ['bin'],
}

sanity_check_commands = [
    'WarpTools --help'
]

modextrapaths = {
    'PATH': 'Release/linux-x64/publish',
    'LD_LIBRARY_PATH': 'lib',
}

modextravars = {
    'RELION_EXTERNAL_RECONSTRUCT_EXECUTABLE': '$(which Noise2Half)',
}
moduleclass = 'bio'
